# Review

### Mybatis
- 개인포폴 스프링작업


-----------------------------------------------------

## 학습목표
- AddressBook - IoC/AOP 적용 + 예외처리, 다국어처리, Mybatis 적용

- Spring 정기 평가 7/6 예정 ---> Android + Spring 추가
```
 개인 포폴
  - IoC
  - AOP
  - 트랜잭션 - Insert 2회 처리시 적용
  - 예외처리
  - 다국어 - view페이지 메뉴
  - Mybatis 적용
```

## ORM(Object Relation Mapping)프레임워크(JPA)

```
(JDBC / Mybatis)                                                  JPA(Java persistence API)
 SQL명령어 직접 작성                                                SQL 자동생성 / 자동 변경
 . Java객체와 ㅡㅡ DBMS테이블 매핑 어려움                        유지보수 편리

                                                                  JPA구현체 종류 : Hibernate, TopLink, Cocobase 프레임워크

  서비스처리 <ㅡㅡㅡㅡㅡㅡㅡㅡ>    public Entity클래스            <ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ> DBMS 테이블
                                    기본생성자
                                    식별자필드                                                  PK필드
                                    필드                              persistence.xml          필드
                                    날짜필드                          (JPA 환경설정)            필드
                                    제외 할 필드
```



# Hibernate 적용사항
```
pom.xml 추가

		<!-- Jackson2라이브러리 추가 : Json/xml처리 라이브러리 -->
		<dependency>
			<groupId>com.fasterxml.jackson.core</groupId>
			<artifactId>jackson-databind</artifactId>
			<version>2.13.0</version>
		</dependency>

 		<!-- JPA 하이버네이트 라이브러리 -->
		<dependency>
			<groupId>org.springframework</groupId>
			<artifactId>spring-orm</artifactId>
			<version>${org.springframework-version}</version>
		</dependency>
		<dependency>
			<groupId>org.hibernate</groupId>
			<artifactId>hibernate-entitymanager</artifactId>
			<version>5.1.0.Final</version>
		</dependency>

		<!-- 
			@XmlRootElement, @XmlAccessorType 어노테이션 사용할 수 있다.
		 -->
		<dependency>
			<groupId>javax.xml.bind</groupId>
			<artifactId>jaxb-api</artifactId>
			<version>2.3.0</version>
		</dependency>




applicationContext.xml
	<!-- Spring과 JPA 연동설정 -->
	<bean id="jpaVendorAdapter" class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"></bean>
	<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
		<property name="dataSource" ref="dataSource"></property>
		<property name="jpaVendorAdapter" ref="jpaVendorAdapter"></property>
		<property name="packagesToScan" value="com.mycompany.biz.board"></property>
		<property name="jpaProperties">
			<props>
				<prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop> <!-- MYSQL 쿼리 적용 생성 -->
				<prop key="hibernate.show_sql">true</prop>			<!-- 생성된 SQL을 콘솔에 출력 여부 -->
				<prop key="hibernate.format_sql">true</prop>		<!-- 출력할 때 정해진 폼으로 출력 -->
				<prop key="hibernate.use_sql_comments">true</prop>	<!-- SQL에 주석 포함 여부 -->
				<prop key="hibernate.id.new_generator_mappings">true</prop>	<!-- 새로운 키 생성 전략 사용 여부 -->
				<prop key="hibernate.hbm2ddl.auto">create</prop>	<!-- 중요: 테이블 생성, 수정, 삭제 DDL 처리 방식 -->
			</props>
		</property>
	</bean>
	
	<!-- Transaction 설정 -->

	<bean id="txManager" class="org.springframework.orm.jpa.JpaTransactionManager"> 
		<property name="entityManagerFactory" ref="entityManagerFactory"></property>
	</bean>

```




